<!DOCTYPE html>
<html>
<body>

<h2>Live Price</h2>
<div id="price"></div>

<script>
    // WebSocket для price-stream
    const priceWs = new WebSocket("ws://localhost:8080/prices");
    priceWs.onmessage = e => {
        const data = e.data;
        document.getElementById("price").innerText = data;
    };
</script>


<hr>

<h2>Chat</h2>

<div id="chat-window"
     style="width: 400px; height: 250px; border: 1px solid #aaa; padding: 8px; overflow-y: auto; background: #f8f8f8;">
</div>

<div style="margin-top: 10px;">
    <input id="chat-input" type="text" placeholder="Enter message..."
           style="width: 300px; padding: 5px;"/>
    <button id="chat-send" style="padding: 5px 10px;">Send</button>
</div>

<script>
    // WebSocket для чату
    const chatWs = new WebSocket("ws://localhost:8080/ws/chat");

    const chatWindow = document.getElementById("chat-window");
    const chatInput  = document.getElementById("chat-input");
    const chatSend   = document.getElementById("chat-send");

    // Коли приходить повідомлення з сервера
    chatWs.onmessage = e => {
        const msg = e.data;

        const div = document.createElement("div");
        div.textContent = msg;
        chatWindow.appendChild(div);

        // автоскрол вниз
        chatWindow.scrollTop = chatWindow.scrollHeight;
    };

    // Відправлення повідомлення
    chatSend.onclick = () => {
        const text = chatInput.value.trim();
        if (text.length === 0) return;

        chatWs.send(text);
        chatInput.value = "";
    };

    // Відправлення на Enter
    chatInput.addEventListener("keypress", e => {
        if (e.key === "Enter") chatSend.onclick();
    });
</script>

</body>
</html>
